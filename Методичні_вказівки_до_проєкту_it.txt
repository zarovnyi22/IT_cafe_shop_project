МЕТОДИЧНІ РЕКОМЕНДАЦІЇ ДО РЕАЛІЗАЦІЇ ПРОЄКТУ
Тема: "Розробка клієнт-серверного веб-застосунку з використанням сучасних
технологій"

1. Загальні положення
Мета проєкту






Закріплення, поглиблення та узагальнення теоретичних знань і практичних
навичок, отриманих під час вивчення дисципліни.
Розвиток навичок самостійної роботи з технічною документацією та сучасними
інструментами розробки.
Набуття практичного досвіду командної роботи над проєктом.

Завдання проєкту
1. Обрати та проаналізувати предметну область.
2. Спроєктувати архітектуру веб-застосунку.
3. Розробити структуру бази даних.
4. Створити серверну частину (Backend) з REST API.
5. Розробити клієнтську частину (Frontend) для взаємодії з користувачем.
6. Провести тестування розробленого застосунку.
7. Підготувати звіт та презентацію до захисту проєкту.

Командна робота
Проєкт виконується командою з двох-трьох осіб. Важливо чітко розподілити обов'язки,
наприклад:





студент 1: відповідальний за розробку Backend (Node.js, Express, Sequelize, база
даних);
студент 2: відповідальний за розробку Frontend (React).
Обидва студенти повинні брати участь у проєктуванні архітектури, бази даних
та API.

2. Вибір теми та технологічного стеку
Вибір теми
Студентам пропонується обрати одну з орієнтовних тем або запропонувати власну,
попередньо узгодивши її з керівником проєкту. При виборі теми варто враховувати її
актуальність та можливість реалізації в рамках визначених технологій.

Технологічний стек
Залежно від складності обраної теми та рівня підготовки, студенти можуть обрати один
із запропонованих стеків




Простіший варіант
o Frontend: React
o Backend: Node.js + Express
o Database: MongoDB з ODM Mongoose
Рекомендований повноцінний варіант (для комплексних проєктів)
o Frontend: React (створений за допомогою Create React App або Vite).
o Backend: Node.js з фреймворком Express.
o ORM: Sequelize для взаємодії з реляційною базою даних.
o Database: PostgreSQL або MySQL.
o API: REST API для взаємодії між клієнтом та сервером.

Обов'язкова вимога: автентифікація та авторизація
o Реалізація механізму на основі JWT (JSON Web Tokens).
o Розподіл ролей: У системі мають бути мінімум дві ролі (наприклад,
USER та ADMIN) з різними правами доступу.
o Захищені маршрути (Protected Routes): Як на бекенді (доступ до
ендпоінтів тільки для авторизованих користувачів), так і на фронтенді
(перенаправлення на сторінку логіну, якщо користувач не увійшов в
систему).

3. Етапи виконання проєкту
Етап 1: Підготовчий (1-2 тиждень)
1. Формування команди та вибір теми.
2. Аналіз предметної області
o Визначення основних функціональних вимог до системи.
o Визначення
ролей
користувачів
(наприклад,
адміністратор,
зареєстрований користувач, гість).
3. Проєктування архітектури
o Описати загальну структуру застосунку (клієнт-сервер).
o Визначити, як клієнт буде взаємодіяти з сервером.
4. Проєктування бази даних
o Створити логічну модель бази даних.
o Для реляційної БД: продумати типи даних, первинні та зовнішні ключі.
Етап 2: Розробка Backend (3-7 тиждень)
1. Налаштування робочого середовища
o Встановити Node.js, обрану СУБД (PostgreSQL/MySQL).
o Ініціалізувати Node.js проєкт (npm init -y).

Встановити необхідні пакети: express, sequelize, pg (або mysql2), nodemon,
dotenv, cors.
2. Підключення до бази даних
o Налаштувати з'єднання з базою даних за допомогою Sequelize.
3. Створення моделей
o Описати моделі таблиць відповідно до спроєктованої ER-діаграми за
допомогою Sequelize.
o Налаштувати зв'язки між моделями (hasMany, belongsTo тощо).
4. Створення маршрутів (Routes) та контролерів (Controllers)
o Розробити ендпоінти (endpoints) для REST API для кожної сутності
(наприклад, /users, /products).
o Реалізувати CRUD-операції (Create, Read, Update, Delete) в контролерах,
використовуючи моделі Sequelize.
5. Налаштування Middleware
o Додати cors для дозволу запитів з фронтенду.
o Налаштувати express.json() для обробки JSON-даних.
o

Етап 3: Розробка Frontend (8-11 тиждень)
1. Налаштування робочого середовища
o Створити React-проєкт (npx create-react-app my-app або npm create
vite@latest).
o Встановити необхідні пакети: axios (для HTTP-запитів), react-router-dom
(для маршрутизації).
2. Розробка компонентів
o Створити структуру папок для компонентів, сторінок, сервісів.
o Розробити UI-компоненти (кнопки, форми, картки).
3. Створення сторінок та налаштування маршрутизації
o Створити основні сторінки застосунку (головна, каталог, сторінка товару,
логін).
o Налаштувати переходи між сторінками за допомогою react-router-dom.
4. Взаємодія з API
o Створити сервіси (наприклад, api.js або окремі файли для кожної сутності)
для надсилання запитів на бекенд за допомогою axios або fetch.
o Реалізувати отримання, створення, оновлення та видалення даних.
5. Управління станом (State Management)
o Використовувати вбудовані хуки React (useState, useEffect, useContext) для
управління станом. Для складних проєктів можна розглянути Redux або
MobX (але це не є обов'язковим).
Етап 4: Інтеграція та тестування (12-13 тиждень)
1. Повна інтеграція Frontend та Backend.
2. Тестування функціоналу

Перевірка коректності роботи всіх CRUD-операцій.
o Тестування валідації форм.
o Перевірка роботи системи для різних ролей користувачів.
3. Виправлення помилок.
o

Етап 5: Підготовка до захисту (14-15 тиждень)
1. Написання звіту
o Оформити пояснювальну записку відповідно до вимог навчального
закладу.
2. Підготовка презентації
o Створити слайди, що демонструють мету, завдання, архітектуру та
основний функціонал проєкту.
3. Підготовка демонстрації проєкту.
4. Структура звіту (пояснювальної записки)
1. Титульний аркуш.
2. Завдання на проєкт.
3. Зміст.
4. Вступ
o Актуальність теми.
o Мета та завдання проєкту.
o Об'єкт та предмет дослідження.
5. Розділ 1. Аналіз предметної області та проєктування системи
o Опис обраної предметної області.
o Вимоги до функціоналу.
o Обґрунтування вибору технологій.
o Діаграма варіантів використання (Use Case Diagram).
o ER-діаграма бази даних.
6. Розділ 2. Розробка програмного продукту
o Опис основних модулів серверної частини (моделі, контролери,
маршрути).
o Опис основних компонентів та сторінок клієнтської частини.
o Опис реалізації ключового функціоналу.
7. Розділ 3. Інструкція користувача та тестування
o Інструкція з розгортання та запуску проєкту.
o Опис основних сценаріїв використання для різних ролей.
o Результати тестування.
8. Висновки
o Підсумок виконаної роботи.
o Оцінка досягнення поставленої мети.
o Можливі напрямки для подальшого розвитку проєкту.
9. Список використаних джерел.

10. Додатки
o Лістинг коду ключових файлів.
5. Критерії оцінювання









Повнота реалізації: наскільки повно реалізовано заявлений функціонал.
Якість коду: читабельність, структурованість, відсутність дублювання.
Правильність вибору та використання технологій: наскільки доцільно
застосовано обраний стек.
Дизайн та юзабіліті: зручність та привабливість інтерфейсу.
Якість звіту та презентації: відповідність вимогам, грамотність, повнота
розкриття теми.
Рівень самостійності та командної взаємодії.

СПИСОК РЕКОМЕНДОВАНИХ ТЕМ ДЛЯ ПРОЄКТУ
Категорія 1: Класичний E-commerce та Маркетплейси
Ці проєкти дозволяють добре відпрацювати CRUD-операції, роботу з кошиком та
замовленнями.
1. Платформа для локальних фермерів






Опис: Маркетплейс, де невеликі фермерські господарства можуть продавати
свою продукцію (овочі, молочні продукти, м'ясо) безпосередньо покупцям.
Ключові сутності: User (з ролями "Фермер", "Покупець"), Product, Category,
Order, OrderItem, Review.
Основний функціонал
o Реєстрація фермерів та покупців.
o Створення та редагування товарів фермером.
o Каталог товарів з фільтрацією та пошуком.
o Кошик для покупок.
o Оформлення замовлення та перегляд історії замовлень.
o Система відгуків та рейтингів для товарів та фермерів.

2. Маркетплейс для продажу авторських виробів (Handmade)






Опис: Платформа, схожа на Etsy, де майстри можуть створювати власні
"магазини" та продавати свої вироби.
Ключові сутності: User (з ролями "Майстер", "Покупець"), Shop, Item, Category,
Order, Review.
Основний функціонал
o Майстер може зареєструватися та створити свій магазин.

o
o
o

Додавання, редагування та видалення товарів у своєму магазині.
Покупці можуть переглядати товари за категоріями або магазинами.
Система замовлень та особистий кабінет для обох ролей.

3. Система замовлення та доставки їжі з невеликих ресторанів





Опис: Агрегатор для кількох місцевих кафе чи ресторанів, що дозволяє
користувачам замовляти їжу онлайн.
Ключові сутності: User, Restaurant, MenuItem, Category, Order, OrderStatus.
Основний функціонал
o Список ресторанів.
o Сторінка ресторану з його меню.
o Додавання страв у кошик.
o Процес оформлення замовлення із зазначенням адреси.
o Відстеження статусу замовлення (напр., "Прийнято", "Готується", "В
дорозі").
o Адмін-панель для власника ресторану для керування меню та
замовленнями.

Категорія 2: Системи Бронювання та Оренди
Такі проєкти вимагають роботи з датами, часом та перевірки доступності, що є цікавим
завданням.
4. Сервіс для бронювання коворкінгів або робочих місць






Опис: Платформа, де користувачі можуть знайти та забронювати робоче місце,
переговорну кімнату або цілий офіс на певний час.
Ключові сутності: User, CoworkingSpace, Workspace (конкретне місце/кімната),
Booking, Amenity (зручності, напр. Wi-Fi, кава).
Основний функціонал
o Пошук коворкінгів на карті або за списком.
o Фільтрація за ціною, датою, наявними зручностями.
o Календар доступності для кожного робочого місця.
o Процес бронювання та оплати (оплату можна імітувати).
o Особистий кабінет з історією бронювань.

5. Платформа для оренди спортивного інвентарю




Опис: Модернізована версія "прокатного пункту". Система дозволяє орендувати
велосипеди, лижі, намети тощо.
Ключові сутності: User, Equipment (інвентар), Category, Booking, Location
(пункт видачі).



Основний функціонал
o Каталог інвентарю з описом та фото.
o Вибір дат оренди через календар.
o Перевірка доступності інвентарю на вибрані дати.
o Бронювання та особистий кабінет.
o Адмін-панель для управління асортиментом та бронюваннями.

6. Система для запису до майстрів (перукар, майстер манікюру, СТО)






Опис: Онлайн-щоденник для салону краси або СТО, де клієнти можуть
самостійно записатися на послугу до конкретного майстра.
Ключові сутності: Master (майстер), Service (послуга), Client, Appointment
(запис), Schedule (графік роботи майстра).
Основний функціонал
o Профілі майстрів зі списком послуг та цінами.
o Інтерактивний календар, де клієнт бачить вільні "слоти" для запису.
o Онлайн-запис на послугу.
o Особистий кабінет для клієнта (перегляд майбутніх та минулих візитів).
o Кабінет для майстра, де він керує своїм графіком та записами.

Категорія 3: Освітні та Соціальні Платформи
Ці ідеї фокусуються на взаємодії між користувачами та обміні контентом.
7. Платформа для обміну навчальними матеріалами та конспектами






Опис: Сервіс для студентів, де вони можуть завантажувати, шукати та
обговорювати конспекти лекцій, методички та інші навчальні матеріали.
Ключові сутності: User, University, Subject (предмет), Document, Comment,
Rating.
Основний функціонал
o Реєстрація та профіль користувача.
o Завантаження файлів (PDF, DOCX) з описом.
o Структурування матеріалів за університетом, факультетом та предметом.
o Пошук та фільтрація документів.
o Система коментарів та рейтингів для кожного документа.

8. Трекер звичок та особистих цілей





Опис: Персональний інструмент для відстеження прогресу у формуванні
корисних звичок (напр., читати щодня, займатися спортом) та досягненні цілей.
Ключові сутності: User, Habit, Goal, CheckIn (щоденна відмітка), Category.
Основний функціонал
o Користувач може створювати власні звички.

o
o
o
o

Щоденний трекінг (відмітка про виконання).
Візуалізація прогресу (календар, графіки, стріки).
Постановка довгострокових цілей та розбиття їх на менші кроки.
Система нагадувань (можна імітувати сповіщення на фронтенді).

9. Невеликий проєктний менеджер для студентських команд (Task Tracker)






Опис: Спрощений аналог Trello або Jira. Дозволяє створювати проєкти, ставити
завдання та відстежувати їх виконання на Kanban-дошці.
Ключові сутності: User, Project, Task, Column (статус, напр., "To Do", "In
Progress", "Done"), Comment.
Основний функціонал
o Створення проєктів та запрошення інших користувачів.
o Створення завдань із описом, дедлайном та виконавцем.
o Kanban-дошка з можливістю перетягування завдань між колонками.
o Коментарі до завдань.

Категорія 4: Системи для Управління Малим Бізнесом
Ці проєкти імітують реальні бізнес-інструменти, такі як CRM або ERP.
10. Проста CRM-система для фрилансера





Опис: Інструмент для ведення клієнтської бази, обліку проєктів та виставлення
рахунків.
Ключові сутності: User (фрилансер), Client, Project, Task, Invoice.
Основний функціонал
o Додавання та ведення списку клієнтів.
o Створення проєктів, прив'язаних до клієнтів.
o Облік завдань та витраченого часу в рамках проєктів.
o Генерація простих рахунків-фактур (інвойсів) у форматі PDF.
o Дашборд з базовою аналітикою (доходи, активні проєкти).

11. Система обліку для невеликої кав'ярні





Опис: Веб-застосунок для баристи, що дозволяє приймати замовлення (Point of
Sale), вести облік проданих товарів та інгредієнтів.
Ключові сутності: Product (кава, десерт), Ingredient, Sale (продаж), Employee.
Основний функціонал
o Інтерфейс для швидкого створення нового замовлення.
o Списання інгредієнтів зі складу при продажу продукту.
o Базовий складський облік (перегляд залишків інгредієнтів).
o Звіт про продажі за день/тиждень/місяць.

Категорія 5: Події та Спільноти
11. Платформа для організації та пошуку місцевих подій






Опис: Веб-портал, де організатори можуть створювати та просувати події
(майстер-класи, вебінари, зустрічі, невеликі концерти), а користувачі можуть
знаходити їх та реєструватися для участі.
Ключові сутності: User (з ролями "Організатор", "Учасник"), Event, Category,
Venue (місце проведення), Registration.
Основний функціонал
o Створення та редагування подій для організаторів.
o Каталог подій з пошуком, фільтрацією за датою, категорією та містом.
o Система реєстрації на події.
o Особистий кабінет користувача зі списком "моїх подій" (майбутніх та
минулих).
o Можливість залишати відгуки після відвідування.

12. Волонтерський портал "Допомога поруч"






Опис: Платформа, що з'єднує неприбуткові організації або ініціативні групи з
людьми, які хочуть стати волонтерами.
Ключові сутності: Organization, User (волонтер), Opportunity (волонтерська
можливість/проєкт), Application (заявка на участь), Skill.
Основний функціонал
o Організації можуть публікувати свої проєкти, вказуючи необхідні
навички та кількість волонтерів.
o Волонтери можуть створювати профілі та вказувати свої вміння та
інтереси.
o Пошук волонтерських можливостей за категоріями (допомога тваринам,
екологія, соціальна сфера).
o Система подачі заявок на участь у проєктах.

Категорія 6: Здоров'я та Спосіб життя
13. Трекер тренувань та спортивного прогресу






Опис: Веб-додаток, де користувачі можуть створювати власні програми
тренувань, обираючи вправи з каталогу, та фіксувати результати кожного
заняття.
Ключові
сутності:
User,
Exercise,
MuscleGroup,
WorkoutPlan,
WorkoutSessionLog (запис про виконане тренування).
Основний функціонал
o Велика база вправ з описом та інструкціями.
o Конструктор для створення персональних планів тренувань.

o
o
o

Можливість логувати виконані вправи, вагу, кількість підходів/повторень.
Проста візуалізація прогресу (графіки ваги, об'ємів тощо).
Календар тренувань.

14. Планувальник харчування та книга рецептів






Опис: Сервіс, який дозволяє користувачам знаходити рецепти, складати меню
на тиждень та автоматично генерувати список покупок на основі обраних страв.
Ключові сутності: User, Recipe, Ingredient, MealPlan (зв'язок рецептів з днями
тижня), ShoppingList.
Основний функціонал
o Додавання, перегляд та пошук рецептів.
o Фільтрація рецептів за категоріями (сніданок, обід), інгредієнтами, часом
приготування.
o Інтерактивний календар для планування меню.
o Автоматичне створення списку необхідних продуктів.
o Можливість відмічати куплені продукти у списку.

Категорія 7: Персональні Інструменти та Хобі
15. Особистий трекер фінансів та бюджетування






Опис: Інструмент для ведення обліку доходів та витрат, який допомагає
користувачам аналізувати свої фінанси та планувати бюджет.
Ключові сутності: User, Account (гаманець, картка), Transaction (транзакція),
Category.
Основний функціонал
o Додавання транзакцій (доходи/витрати) з прив'язкою до категорії та
рахунку.
o Створення та керування категоріями витрат (їжа, транспорт, розваги).
o Налаштування місячних бюджетів для кожної категорії.
o Дашборд з візуальною аналітикою (діаграми, що показують, куди йдуть
гроші).

16. Цифрова бібліотека для відстеження прочитаних книг






Опис: Персональна "книжкова полиця", де користувачі можуть каталогізувати
книги, які вони прочитали, читають зараз або планують прочитати.
Ключові сутності: User, Book, Author, Bookshelf (статус "прочитано", "читаю",
"хочу прочитати"), Review.
Основний функціонал
o Додавання книг до своєї бібліотеки (можна інтегрувати зовнішній API,
напр. Google Books, для пошуку).

o
o
o

Сортування книг за віртуальними полицями.
Відстеження прогресу читання (на якій сторінці зараз).
Можливість ставити оцінки та писати особисті нотатки/рецензії до книг.

17. Система для управління колекцією (наприклад, настільних ігор, монет, марок)






Опис: Спеціалізований додаток для колекціонерів, що дозволяє вести детальний
облік екземплярів своєї колекції.
Ключові сутності: User, CollectionItem, Category, Tag, Attribute (напр., рік
випуску, стан, виробник).
Основний функціонал
o Додавання нових предметів до колекції з фотографіями та детальним
описом.
o Налаштування кастомних полів для опису предметів.
o Потужний пошук та фільтрація за різними атрибутами.
o Можливість створювати "списки бажаного" (wishlists).

Категорія 8: Інструменти для навчання та роботи
18. Платформа для створення та проходження тестів (Quiz Maker)





Опис: Інструмент, де зареєстровані користувачі (наприклад, викладачі) можуть
створювати тести з різними типами питань, а інші (студенти) – проходити їх та
бачити результати.
Ключові сутності: User (автор, учасник), Quiz, Question, AnswerOption, Result.
Основний функціонал
o Конструктор для створення тестів (питання, варіанти відповідей,
правильна відповідь).
o Генерація унікального посилання для проходження тесту.
o Інтерфейс для проходження тесту.
o Автоматичний підрахунок балів та відображення результатів.
o Кабінет автора з аналітикою по проходженнях.

19. Бюро знахідок для кампусу університету або міста






Опис: Веб-портал, де люди можуть розміщувати оголошення про загублені або
знайдені речі.
Ключові сутності: User, Item (з типом "загублено"/"знайдено"), Category,
Location, Message.
Основний функціонал
o Публікація оголошень із зазначенням опису, фото та місця, де річ була
втрачена/знайдена.

o

o
o

Пошук та фільтрація оголошень за ключовими словами, датою,
категорією.
Інтеграція з картою для візуалізації локації.
Внутрішня система обміну повідомленнями, щоб користувачі могли
безпечно зв'язатися один з одним.

20. Генератор резюме (CV Builder)






Опис: Онлайн-конструктор, що дозволяє користувачам створювати професійні
резюме, заповнюючи стандартизовані форми, та експортувати їх у PDF-форматі.
Ключові сутності: User, Resume, Experience (досвід роботи), Education, Skill,
Template.
Основний функціонал
o Покрокове створення резюме через зручний інтерфейс.
o Додавання та редагування розділів (контактна інформація, досвід, освіта,
навички).
o Можливість вибору одного з кількох шаблонів оформлення.
o Перегляд готового резюме в реальному часі.
o Експорт фінального документа у форматі PDF на стороні сервера або
клієнта.

21. ТЕМА НА ВЛАСНИЙ ВИБІР (ЗА ПОПЕРЕДНІМ ПОГОДЖЕННЯМ З
КЕРІВНИКОМ КР)

Порада студентам: обирайте тему, яка вам справді цікава. Проєкт, над яким приємно
працювати, буде виконаний значно якісніше. Також не намагайтеся реалізувати одразу
весь можливий функціонал – краще зробити менше, але стабільно і добре.
,
База даних до проекту 
-- Вимикаємо перевірку ключів на момент створення, щоб уникнути помилок залежностей
SET FOREIGN_KEY_CHECKS = 0;

-- =========================================================
-- 1. ТАБЛИЦІ ДОВІДНИКІВ ТА ПЕРСОНАЛУ
-- =========================================================

-- Таблиця категорій
CREATE TABLE IF NOT EXISTS categories (
    category_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL 
);

-- Таблиця співробітників
CREATE TABLE IF NOT EXISTS employees (
    employee_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    role ENUM('Barista', 'Admin') NOT NULL,
    phone VARCHAR(20),
    is_active BOOLEAN DEFAULT TRUE
) ;

-- =========================================================
-- 2. СКЛАД ТА МЕНЮ
-- =========================================================

-- Таблиця інгредієнтів
CREATE TABLE IF NOT EXISTS ingredients (
    ingredient_id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    current_stock DECIMAL(10, 2) DEFAULT 0.00,
    unit VARCHAR(20) NOT NULL COMMENT 'kg, l, pcs',
    warning_threshold DECIMAL(10, 2) DEFAULT 0.00 
) ;

-- Таблиця товарів (Меню)
CREATE TABLE IF NOT EXISTS products (
    product_id INT AUTO_INCREMENT PRIMARY KEY,
    category_id INT NOT NULL,
    name VARCHAR(150) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    is_active BOOLEAN DEFAULT TRUE,
    
    FOREIGN KEY (category_id) REFERENCES categories(category_id) ON DELETE RESTRICT
);

-- Таблиця рецептів (Технологічні карти)
-- Зв'язує продукт з інгредієнтами для списання
CREATE TABLE IF NOT EXISTS recipes (
    recipe_id INT AUTO_INCREMENT PRIMARY KEY,
    product_id INT NOT NULL,
    ingredient_id INT NOT NULL,
    quantity_required DECIMAL(10, 2) NOT NULL,
    
    FOREIGN KEY (product_id) REFERENCES products(product_id) ON DELETE CASCADE,
    FOREIGN KEY (ingredient_id) REFERENCES ingredients(ingredient_id) ON DELETE RESTRICT
);

-- Таблиця поставок (спрощена)
CREATE TABLE IF NOT EXISTS supplies (
    supply_id INT AUTO_INCREMENT PRIMARY KEY,
    ingredient_id INT NOT NULL,
    quantity_added DECIMAL(10, 2) NOT NULL,
    cost DECIMAL(10, 2),
    supply_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (ingredient_id) REFERENCES ingredients(ingredient_id) ON DELETE CASCADE
);

-- =========================================================
-- 3. ПРОДАЖІ
-- =========================================================

-- Таблиця замовлень (Шапка чеку)
CREATE TABLE IF NOT EXISTS orders (
    order_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    employee_id INT NOT NULL,
    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    total_amount DECIMAL(10, 2) NOT NULL,
    payment_method ENUM('Cash', 'Card', 'App') DEFAULT 'Card',
    status ENUM('Paid', 'Cancelled') DEFAULT 'Paid',
    
    FOREIGN KEY (employee_id) REFERENCES employees(employee_id) ON DELETE RESTRICT
);

-- Таблиця деталей замовлення (Товари в чеку)
CREATE TABLE IF NOT EXISTS order_details (
    detail_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    order_id BIGINT NOT NULL,
    product_id INT NOT NULL,
    quantity INT DEFAULT 1,
    price_at_sale DECIMAL(10, 2) NOT NULL,
    
    FOREIGN KEY (order_id) REFERENCES orders(order_id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES products(product_id) ON DELETE RESTRICT
);

-- Вмикаємо перевірку ключів назад
SET FOREIGN_KEY_CHECKS = 1;

USE coffee_shop_db;

-- 1. ВИМИКАЄМО ЗАХИСТ ЗВ'ЯЗКІВ ДЛЯ ОЧИЩЕННЯ
SET FOREIGN_KEY_CHECKS = 0;

-- Очищаємо таблиці (скидаємо ID на 1)
TRUNCATE TABLE order_details;
TRUNCATE TABLE orders;
TRUNCATE TABLE supplies;
TRUNCATE TABLE recipes;
TRUNCATE TABLE products;
TRUNCATE TABLE ingredients;
TRUNCATE TABLE categories;
TRUNCATE TABLE employees;

SET FOREIGN_KEY_CHECKS = 1;

select * from products;
-- =========================================================
-- 2. ЗАПОВНЮЄМО ДОВІДНИКИ
-- =========================================================

-- Категорії
INSERT INTO categories (name) VALUES 
('Кава'),          -- ID 1
('Чаї та Напої'),  -- ID 2
('Десерти'),       -- ID 3
('Випічка');       -- ID 4

-- Інгредієнти
-- Увага: точність DECIMAL(10,2), тому пишемо 10.00, а не 10.000
INSERT INTO ingredients (name, current_stock, unit, warning_threshold) VALUES 
('Зерно Арабіка 100%', 10.00, 'kg', 1.00),     -- ID 1
('Зерно Бленд', 5.00, 'kg', 0.50),             -- ID 2
('Молоко 2.5%', 40.00, 'l', 5.00),             -- ID 3
('Молоко Безлактозне', 10.00, 'l', 2.00),      -- ID 4
('Сироп Карамель', 5.00, 'l', 0.50),           -- ID 5
('Чай Ерл Грей', 2.00, 'kg', 0.20),            -- ID 6
('Стакан паперовий S', 500.00, 'pcs', 50.00),  -- ID 7
('Стакан паперовий L', 500.00, 'pcs', 50.00),  -- ID 8
('Круасан (заморозка)', 100.00, 'pcs', 10.00), -- ID 9
('Цукор стік', 1000.00, 'pcs', 100.00);        -- ID 10

-- Співробітники
-- Увага: Ролі тільки 'Admin' або 'Barista'
INSERT INTO employees (name, role, phone) VALUES 
('Олена Адмін', 'Admin', '+380991234567'),   -- ID 1 (Була Менеджером)
('Іван Бариста', 'Barista', '+380997654321'), -- ID 2
('Петро Стажер', 'Barista', '+380630000000'); -- ID 3


-- =========================================================
-- 3. ЗАПОВНЮЄМО МЕНЮ (ПРОДУКТИ)
-- =========================================================

INSERT INTO products (category_id, name, description, price) VALUES 
(1, 'Еспресо', 'Класичний шот, 30мл', 40.00),           -- ID 1
(1, 'Американо', 'Еспресо з гарячою водою', 45.00),     -- ID 2
(1, 'Капучино', 'Еспресо + спінене молоко', 60.00),     -- ID 3
(1, 'Лате', 'Багато молока, трохи кави', 65.00),        -- ID 4
(1, 'Лате Карамель', 'Солодкий лате з сиропом', 75.00), -- ID 5
(2, 'Чай Чорний', 'Класичний Ерл Грей', 35.00),         -- ID 6
(4, 'Круасан класичний', 'Французька випічка', 55.00),  -- ID 7
(3, 'Чізкейк', 'Нью-Йорк', 90.00);                      -- ID 8


-- =========================================================
-- 4. ЗАПОВНЮЄМО РЕЦЕПТИ
-- Увага: Округлили вагу до 2 знаків (0.02 замість 0.018), 
-- щоб відповідати вашому типу DECIMAL(10, 2)
-- =========================================================

INSERT INTO recipes (product_id, ingredient_id, quantity_required) VALUES 
-- Еспресо (ID 1): ~20г кави + стаканчик S
(1, 1, 0.02), 
(1, 7, 1.00),

-- Американо (ID 2): ~20г кави + стаканчик L
(2, 1, 0.02), 
(2, 8, 1.00),

-- Капучино (ID 3): ~20г кави + 0.15л молока + стаканчик S
(3, 1, 0.02), 
(3, 3, 0.15),
(3, 7, 1.00),

-- Лате (ID 4): ~20г кави + 0.25л молока + стаканчик L
(4, 1, 0.02), 
(4, 3, 0.25),
(4, 8, 1.00),

-- Лате Карамель (ID 5): + 0.02л сиропу
(5, 1, 0.02), 
(5, 3, 0.25), 
(5, 5, 0.02),
(5, 8, 1.00),

-- Чай (ID 6): 0.01кг чаю (мінімальне значення для DECIMAL 10,2)
(6, 6, 0.01),
(6, 8, 1.00),

-- Круасан (ID 7)
(7, 9, 1.00);


-- =========================================================
-- 5. ЗАПОВНЮЄМО ПОСТАВКИ
-- =========================================================

INSERT INTO supplies (ingredient_id, quantity_added, cost, supply_date) VALUES 
(1, 10.00, 4500.00, NOW()), 
(3, 50.00, 1500.00, NOW()),
(7, 1000.00, 2000.00, NOW());


-- =========================================================
-- 6. ЗАПОВНЮЄМО ІСТОРІЮ ПРОДАЖІВ
-- =========================================================

-- ЧЕК 1
INSERT INTO orders (employee_id, total_amount, payment_method, status, order_date) 
VALUES (2, 45.00, 'Cash', 'Paid', NOW());

INSERT INTO order_details (order_id, product_id, quantity, price_at_sale) 
VALUES (1, 2, 1, 45.00);

-- ЧЕК 2
INSERT INTO orders (employee_id, total_amount, payment_method, status, order_date) 
VALUES (3, 130.00, 'Card', 'Paid', NOW());

INSERT INTO order_details (order_id, product_id, quantity, price_at_sale) VALUES 
(2, 5, 1, 75.00),
(2, 7, 1, 55.00);

-- ЧЕК 3
INSERT INTO orders (employee_id, total_amount, payment_method, status, order_date) 
VALUES (2, 255.00, 'App', 'Paid', NOW());

INSERT INTO order_details (order_id, product_id, quantity, price_at_sale) VALUES 
(3, 3, 2, 60.00), 
(3, 8, 1, 90.00), 
(3, 2, 1, 45.00);